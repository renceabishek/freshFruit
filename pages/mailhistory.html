<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">    

	<link href="../css/mailhistory.css" rel="stylesheet" type="text/css">
    <script src="../vendor/jquery/jquery.js"></script>
    <script src="../js/jquery-3.2.1.min.js"></script>
    <script src="../js/mailconfig.js"></script>
    <script src="../js/rendered.js"></script>
    <script src="../js/datareport.js"></script>
    <script src="../js/lowdb.js"></script>
    <script src="/path/to/shared/js/modernizr.com/Modernizr-2.5.3.forms.js"> </script>

</head>
    <!-- Page Content -->
    <form id="scheduleform">
        <div id="page-content-wrapper">
            <div class="container-fluid">
                <div class="row">
                    <div style="background:white;border: 1px solid #ffffff;height:800px;box-shadow: 5px 5px 27px #8f8e8e;border-radius: 10px;margin:0 auto;Z-INDEX: 2000; margin-top: -15px;">
                        <div class="col-sm-12 col-md-8 col-lg-12" style="font-size:20px;color:#00b6e3;margin-top: 5px;font-weight:bold;background-color: darkblue;margin-top: 0px; color:white;padding:5px;border-radius:10px 10px 0 0">
                            Mail History </div>
                            <div class="mailhistorydetails">
                                <table id="mailhistorylist" class="table table-bordered" >
                                    <thead>
                                        <th style="padding:8px !important;text-align:center;" id="from">From</th>
                                        <th style="padding:8px !important;text-align:center;" id="to">To</th>
                                        <th style="padding:8px !important;text-align:center;" id="report">Report</th>
                                        <th style="padding:8px !important;text-align:center;" id="date">DateCreated</th>
                                        <th style="padding:8px !important;text-align:center;" id="status">Status</th>
                                    </thead>
                                    <tbody id="dataTable">
                                       <!-- <tr *ngFor="let data of datarray">
                                            <td>{{data.from}}</td>
                                            <td>{{data.to}}</td>
                                            <td>{{data.subject}}</td>
                                            <td>{{data.datecreated}}</td>
                                            <td>{{data.status}}</td>
                                        </tr> -->
                                    </tbody>
                                </table>
                            </div>
                            <br/>
                            <br/>
                        
    </form> 
    <script type="text/javascript">
    $(document).ready(function () {
    var mailarray;
    var data = db.get('maillog').value();
    console.log(data)
    mailarray=data.slice(Math.max(data.length - 50, 1)); 
    console.log(JSON.stringify(mailarray));   
    var html = "<table border='1|1'>";
    for (var i = 0; i < mailarray.length; i++) {
        html+="<tr>";
        html+="<td>"+mailarray[i].from+"</td>";
        html+="<td>"+mailarray[i].to+"</td>";
        html+="<td>"+mailarray[i].subject+"</td>";
        html+="<td>"+mailarray[i].datecreated+"</td>";
        html+="<td>"+mailarray[i].status+"</td>";
        html+="</tr>";
    }
    html+="</table>";
    document.getElementById("dataTable").innerHTML = html;
    makeActiveSidebar();
});
        
 function makeActiveSidebar(){
    
    document.getElementById("noonFrom").setAttribute("class", "");
    document.getElementById("eospFrom").setAttribute("class", "");
    document.getElementById("arrivalFrom").setAttribute("class", "");
    document.getElementById("departureFrom").setAttribute("class", "");
    document.getElementById("bospFrom").setAttribute("class", "");
    document.getElementById("bunkerrequestFrom").setAttribute("class", "");
    document.getElementById("bdnFrom").setAttribute("class", "");
    document.getElementById("brobFrom").setAttribute("class", "");
    document.getElementById("vslinfo").setAttribute("class", "");
    document.getElementById("ports").setAttribute("class", "");
    document.getElementById("sysconfig").setAttribute("class", "");
    document.getElementById("mailhistory").setAttribute("class", "active");
    document.getElementById("masterFileupload").setAttribute("class", "");

}

</script>
    <script type="text/javascript" src="../../shared/js/html5Forms.js" data-webforms2-support="date" data-webforms2-force-js-validation="true"
        data-webforms2-force-js-date-picker="true" data-lang="en">
        </script>

    <!-- /#wrapper -->
    

    <!-- jQuery -->
    <script src="../vendor/jquery/jquery.min.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="../vendor/bootstrap/js/bootstrap.min.js"></script>

    <!-- Metis Menu Plugin JavaScript -->
    <script src="../vendor/metisMenu/metisMenu.min.js"></script>


    <!-- Custom Theme JavaScript -->
    <script src="../dist/js/sb-admin-2.js"></script>
    </body>

</html>